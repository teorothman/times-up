<div class="container">
  <div class="form-wrapper">
  <h1>Cards entered <%= session[:card_count] %>/5</h1>
    <%= simple_form_for [@game, @user, @card] do |form| %>
      <div class="field">
        <%= form.input :content, input_html: { class: "game-code-input", required: true, id: 'word-input' }, placeholder: "Write here...", label: false %>
      </div>
      <div>
        <p>Some examples:</p>
        <p>“<%= @examples.join('”, “') %>”</p>
      </div>
      <div>
        <%= form.button :submit, "Enter a word", class: "btn btn-red", id: 'submit-button' %>
      </div>
    <% end %>
  </div>
  <% if session[:card_count] == 6 %>
    <script type="text/javascript">
      window.location = "<%= waiting_path %>";
    </script>
  <% end %>
</div>
<script type="text/javascript">
  document.addEventListener('turbo:load', () => {
  const input = document.getElementById('word-input');
  const submitButton = document.getElementById('submit-button');
  function checkInput() {
    submitButton.disabled = input.value.trim() === '';
  }
  checkInput();
  input.addEventListener('input', checkInput);
  document.querySelector('form').addEventListener('submit', (e) => {
    if (input.value.trim() === '') {
      e.preventDefault();
      alert('Please fill a word');
    }
  });
  });
</script>
<% if params[:button_disabled] %>
<script type="text/javascript">
  window.addEventListener('DOMContentLoaded', (event) => {
    const submitButton = document.getElementById('submit-button');
    if (submitButton) {
      submitButton.disabled = true;
    }
  });
</script>
<% end %>
